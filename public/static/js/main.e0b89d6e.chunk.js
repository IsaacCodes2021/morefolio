(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{138:function(e,t,n){},139:function(e,t,n){},156:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(48),i=n.n(s),r=(n(138),n(7)),o=n(30),l=n(19),j=n(93),b=n(207),h=(n(139),n(191)),u=n(0);var O=function(){return Object(u.jsx)(h.a,{children:Object(u.jsx)("img",{width:window.innerWidth,src:"/morem.png"})})},d=n(218),p=n(3),x=n(16),f=n(202),m=n(217);var g=function(e){e.setUser;var t=Object(c.useState)({username:"",email:"",password:"",passwordConfirmation:""}),n=Object(r.a)(t,2),a=n[0],s=n[1];function i(e){s((function(t){return Object(x.a)(Object(x.a)({},t),{},Object(p.a)({},e.target.name,e.target.value))}))}return Object(u.jsxs)(h.a,{children:[Object(u.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),""===a.password)alert("cannot leave password blank");else if(""===a.username)alert("cannot leave username blank");else if(""===a.email)alert("cannot leave email blank");else if(a.password!==a.passwordConfirmation)alert("passwords not matching");else if(a.password===a.passwordConfirmation){var t=a;delete t.passwordConfirmation,fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then(console.log)}},children:[Object(u.jsx)(f.a,{name:"username",label:"Username",onChange:i,value:a.username}),Object(u.jsx)(f.a,{name:"email",label:"Email",onChange:i,value:a.email}),Object(u.jsx)(f.a,{name:"password",label:"Password",type:"password",onChange:i,value:a.password}),Object(u.jsx)(f.a,{name:"passwordConfirmation",label:"Confirm Password",type:"password",onChange:i,value:a.passwordConfirmation}),Object(u.jsx)(m.a,{variant:"contained",type:"submit",children:"submit"})]}),Object(u.jsx)(o.b,{to:"/signin",children:Object(u.jsx)(m.a,{variant:"contained",children:"Already have an account?"})})]})};var y=function(e){var t=e.setUser;return Object(u.jsx)(d.a,{children:Object(u.jsx)(g,{setUse:t})})},v=n(197),k=n(92),C=n.n(k),w=n(104);var D=function(e){var t=e.setUser,n=Object(l.f)(),a=Object(c.useState)({username:"",password:""}),s=Object(r.a)(a,2),i=s[0],j=s[1];function b(e){j((function(t){return Object(x.a)(Object(x.a)({},t),{},Object(p.a)({},e.target.name,e.target.value))}))}function O(){return(O=Object(w.a)(C.a.mark((function e(c){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),""!==i.username){e.next=5;break}alert("please enter a username"),e.next=14;break;case 5:if("please enter a password"!==i.password){e.next=9;break}alert("please enter a password"),e.next=14;break;case 9:if(""===i.username||""===i.password){e.next=14;break}return e.next=12,fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});case 12:(a=e.sent).ok?(a.json().then((function(e){return t(e)})),n.push("/my-account")):a.json().then((function(e){return alert(e.errors)}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.jsx)(h.a,{children:Object(u.jsxs)("form",{onSubmit:function(e){return O.apply(this,arguments)},children:[Object(u.jsx)(f.a,{name:"username",label:"Username",onChange:b,value:i.username}),Object(u.jsx)(f.a,{name:"password",label:"Password",type:"password",onChange:b,value:i.password}),Object(u.jsx)(m.a,{variant:"contained",type:"",children:"signin"}),Object(u.jsx)(o.b,{to:"/signup",children:Object(u.jsx)(m.a,{variant:"contained",children:"don't have an account?"})})]})})};var S=function(e){var t=e.setUser;return Object(u.jsx)(v.a,{children:Object(u.jsx)(D,{setUser:t})})},F=n(220),T=n(221),_=n(211),P=n(210),I=n(216),L=n(219),E=n(198),U=n(85),q=n.n(U),J=n(107),N=n.n(J),B=n(109),R=n.n(B),W=n(108),A=n.n(W),z=n(76),$=n.n(z),H=n(106),V=n.n(H);var M=function(e){var t=e.drawerOpen,n=e.setDrawerOpen,c=e.setUser,a=Object(l.f)();return Object(u.jsx)(P.a,{open:t,onClose:function(e){return n(!e)},color:"secondary",children:Object(u.jsxs)(h.a,{style:{width:"300px",height:"100%",backgroundColor:"#D6F9FF"},children:[Object(u.jsxs)(I.a,{children:[Object(u.jsxs)(L.a,{onClick:function(){n(!t),a.push("/")},children:[Object(u.jsx)(E.a,{children:Object(u.jsx)(V.a,{color:"blackish"})}),"Home"]}),Object(u.jsxs)(L.a,{onClick:function(){n(!t),a.push("/forum")},children:[Object(u.jsx)(E.a,{children:Object(u.jsx)($.a,{color:"blackish"})}),"Forum"]}),Object(u.jsxs)(L.a,{onClick:function(){n(!t),a.push("/my-account")},children:[Object(u.jsx)(E.a,{children:Object(u.jsx)(N.a,{color:"blackish"})}),"Dashboard"]}),Object(u.jsxs)(L.a,{onClick:function(){n(!t),a.push("/my-portfolio")},children:[Object(u.jsx)(E.a,{children:Object(u.jsx)(A.a,{color:"blackish"})}),"my portfolio"]}),Object(u.jsxs)(L.a,{onClick:function(){n(!t),a.push("/my-watchlists")},children:[Object(u.jsx)(E.a,{children:Object(u.jsx)(R.a,{color:"blackish"})}),"my watchlists"]})]}),Object(u.jsxs)(m.a,{variant:"contained",style:{bottom:16,right:16,position:"absolute"},onClick:function(){fetch("/logout",{method:"DELETE"}),c(!1),a.push("/"),n(!t)},children:["log out",Object(u.jsx)(q.a,{style:{marginLeft:"6px"}})]})]})})};var G=function(e){var t=e.user,n=e.setUser,a=(e.searchResults,e.setSearchResults),s=Object(c.useState)(0),i=Object(r.a)(s,2),j=(i[0],i[1],Object(c.useState)("")),b=Object(r.a)(j,2),O=b[0],d=b[1],p=Object(c.useState)(!1),x=Object(r.a)(p,2),g=x[0],y=x[1],v=Object(l.f)();return Object(u.jsxs)(F.a,{position:"static",color:"third",children:[Object(u.jsx)(M,{setDrawerOpen:y,drawerOpen:g,setUser:n}),Object(u.jsxs)(T.a,{children:[Object(u.jsx)("img",{width:"110",src:"/morefolio.png",onClick:function(){y(!g)}}),Object(u.jsx)(h.a,{sx:{padding:"inherit",height:"inherit",width:"30%"},children:Object(u.jsx)("form",{onSubmit:function(e){e.preventDefault(),a(e.target.search.value),console.log(e.target.search.value),v.push("/asset-search")},children:Object(u.jsx)(f.a,{size:"small",label:"search stocks and crypto",name:"search",onChange:function(e){d(e.target.value)},value:O})})}),t?Object(u.jsx)(h.a,{style:{position:"absolute",right:0},children:Object(u.jsx)(T.a,{children:Object(u.jsx)(o.b,{to:"/my-account",children:Object(u.jsx)(_.a,{src:t.profile_img})})})}):Object(u.jsx)(o.b,{to:"/signin",children:Object(u.jsx)(m.a,{variant:"contained",color:"primary",children:"sign in"})})]})]})},K=n(225),Q=n(226),X=n(224),Y=n(222),Z=n(223);var ee=function(e){var t=e.editDialog,n=e.setEditDialog,a=e.user,s=e.setUser,i=Object(c.useState)({username:a.username,profile_img:a.profile_img}),o=Object(r.a)(i,2),l=o[0],j=o[1];function b(e){j(Object(x.a)(Object(x.a)({},l),{},Object(p.a)({},e.target.name,e.target.value)))}return Object(u.jsxs)(Y.a,{open:t,onClose:function(e){return n(!e)},children:[Object(u.jsx)(Z.a,{children:"User Settings"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/users/".concat(a.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then((function(e){return e.json()})).then((function(e){s(e)})),console.log(l)},children:[Object(u.jsx)(f.a,{label:"username",name:"username",value:l.username,onChange:b}),Object(u.jsx)(f.a,{label:"profile picture",name:"profile_img",value:l.profile_img,onChange:b}),Object(u.jsx)(m.a,{variant:"contained",type:"submit",onClick:console.log(l),children:"update"})]}),Object(u.jsx)(m.a,{color:"error",onClick:function(){},children:"Delete Account"})]})};var te=function(e){var t=e.user,n=e.setUser,a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],o=s[1],j=Object(l.f)();return Object(u.jsxs)(h.a,{style:{vw:"90",margin:"5%"},children:[Object(u.jsx)(ee,{setEditDialog:o,editDialog:i,user:t,setUser:n}),t?Object(u.jsx)(K.a,{children:Object(u.jsxs)(Q.a,{children:[Object(u.jsx)(_.a,{alt:t.username,src:t.profile_img}),Object(u.jsxs)(X.a,{children:["username: ",t.username]}),Object(u.jsxs)(X.a,{children:["email: ",t.email]}),Object(u.jsx)(m.a,{variant:"contained",onClick:function(){o(!i)},style:{margin:"7px"},children:"edit"}),Object(u.jsx)("br",{}),Object(u.jsx)(m.a,{style:{margin:"7px"},variant:"contained",onClick:function(){return j.push("/my-portfolio")},children:"my portfolio"}),Object(u.jsx)("br",{}),Object(u.jsx)(m.a,{style:{margin:"7px"},variant:"contained",onClick:function(){return j.push("/my-watchlists")},children:" my watchlists"})]})}):Object(u.jsx)(X.a,{variant:"h4",children:"User not signed in"})]})},ne=n(227),ce=n(215),ae=n(228),se=n(229),ie=n(230),re=n(231),oe=n(232),le=n(111),je=n.n(le);var be=function(e){var t=e.isOpen,n=e.setIsOpen,c=e.dialogData,a=e.setIsUpdateOpen,s=e.setIsDeleteOpen,i=e.isDeleteOpen;return console.log(c),Object(u.jsxs)(Y.a,{open:t,onClose:function(e){return n(!e)},children:[Object(u.jsx)(Z.a,{children:c.ticker}),Object(u.jsxs)(X.a,{style:{marginLeft:"8px"},children:["holdings: ",c.quantity]}),Object(u.jsxs)(X.a,{style:{marginLeft:"8px"},children:["purchase price: ",c.purchase_price]}),Object(u.jsx)(m.a,{onClick:function(){n((function(e){return n(!e)})),a(!0)},children:"update holdings"}),Object(u.jsx)(m.a,{onClick:function(){n((function(e){return n(!e)})),s(!i)},color:"error",children:"Remove"})]})},he=n(110),ue=n.n(he);var Oe=function(e){var t=e.isUpdateOpen,n=e.setIsUpdateOpen,a=e.dialogData,s=e.setPortfolioItems,i=e.portfolioItems,o=(Object(l.f)(),Object(c.useState)({})),j=Object(r.a)(o,2),b=j[0],h=j[1];function O(e){h(Object(x.a)(Object(x.a)({},b),{},Object(p.a)({},e.target.name,e.target.value)))}return console.log(a),Object(u.jsxs)(Y.a,{open:t,onClose:function(e){return n(!e)},children:[Object(u.jsxs)(Z.a,{children:["edit ",a.ticker," holdings"]}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/portfolio_item/".concat(a.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).then((function(e){return e.json()})).then((function(){n(!1),fetch("/me").then((function(e){return e.json()})).then((function(e){s(e.portfolio_items),console.log("from fetch"),console.log(i),h({quantity:"",purchase_price:""})}))}))},children:[Object(u.jsx)(f.a,{label:"shares: ".concat(a.quantity),name:"quantity",value:b.quantity,onChange:O,size:"small",style:{marginLeft:"8px",marginBottom:"8px"}}),Object(u.jsx)(f.a,{label:"purchase price: ".concat(a.purchase_price),name:"purchase_price",value:b.purchase_price,onChange:O,size:"small",style:{marginLeft:"8px",marginBottom:"8px"}}),Object(u.jsx)(m.a,{type:"submit",children:Object(u.jsx)(ue.a,{})})]})]})};var de=function(e){var t=e.isDeleteOpen,n=e.setIsDeleteOpen,c=e.dialogData,a=e.setPortfolioItems;return e.portfolioItems,Object(u.jsxs)(Y.a,{open:t,onClose:function(e){return n(!e)},children:[Object(u.jsxs)(Z.a,{children:["Are you sure you want to remove ",c.ticker," from your portfolio?"]}),Object(u.jsx)(m.a,{color:"error",onClick:function(){fetch("/portfolio-item/".concat(c.id),{method:"DELETE"}).then((function(e){return e.json()})).then((function(){fetch("/me").then((function(e){return e.json()})).then((function(e){a(e.portfolio_items)}))})),n(!t)},children:"delete"}),Object(u.jsx)(m.a,{onClick:function(e){return n(!e)},children:"Exit"})]})};var pe=function(e){var t=e.user,n=e.priceData,a=(e.setPriceData,e.tickerForFetch,e.setTickerForFetch),s=Object(c.useState)(!1),i=Object(r.a)(s,2),o=i[0],l=i[1],j=Object(c.useState)(!1),b=Object(r.a)(j,2),O=b[0],d=b[1],p=Object(c.useState)(!1),x=Object(r.a)(p,2),f=x[0],g=x[1],y=Object(c.useState)(!1),v=Object(r.a)(y,2),k=v[0],C=v[1],w=Object(c.useState)(t.portfolio_items),D=Object(r.a)(w,2),S=D[0],F=D[1],T=0;function _(e,t){var n=e-t;return n>0?[n.toFixed(2),!0]:n<0?[n.toFixed(2),!1]:void 0}return Object(c.useEffect)((function(){fetch("/me").then((function(e){return e.json()})).then((function(e){F(e.portfolio_items),console.log("from fetch"),console.log(S);var t=S.map((function(e){return e.ticker}));a(t)}))}),[]),Object(c.useEffect)((function(){var e=S.map((function(e){return e.ticker}));a(e)}),[S]),console.log("pricedata: ",n),Object(u.jsxs)(h.a,{children:[Object(u.jsx)(be,{setIsOpen:l,isOpen:o,dialogData:O,setIsUpdateOpen:g,setIsDeleteOpen:C,isDeleteOpen:k,setPortfolioItems:F,portfolioItems:S}),Object(u.jsx)(Oe,{isUpdateOpen:f,setIsUpdateOpen:g,dialogData:O,setPortfolioItems:F,portfolioItems:S}),Object(u.jsx)(de,{setIsDeleteOpen:C,isDeleteOpen:k,dialogData:O,setPortfolioItems:F,portfolioItems:S}),Object(u.jsx)(ne.a,{component:ce.a,children:Object(u.jsxs)(ae.a,{children:[Object(u.jsx)(se.a,{children:Object(u.jsxs)(ie.a,{children:[Object(u.jsx)(re.a,{children:"Symbol"}),Object(u.jsx)(re.a,{children:"Price"}),Object(u.jsx)(re.a,{children:"Holdings"}),Object(u.jsx)(re.a,{children:"Value"}),Object(u.jsx)(re.a,{children:"P/L (%)"}),Object(u.jsx)(re.a,{children:"P/L ($)"}),Object(u.jsx)(re.a,{})]})}),Object(u.jsx)(oe.a,{children:n?Object(u.jsxs)(u.Fragment,{children:[S.map((function(e){return console.log("--------items------"),console.log("ticker: ",n[e.ticker]),S&&n?Object(u.jsxs)(ie.a,{children:[Object(u.jsx)(re.a,{children:e.ticker}),n&&S?Object(u.jsxs)(re.a,{children:["$",parseFloat(n[e.ticker].values[0].close).toFixed(2)]}):Object(u.jsx)(re.a,{children:"waiting"}),Object(u.jsx)(re.a,{children:e.quantity}),n&&S?Object(u.jsx)(re.a,{children:(a=n["".concat(e.ticker)].values[0].close,s=e.quantity,T+=a*s,console.log(T),a*s).toFixed(2)}):Object(u.jsx)(re.a,{children:"waiting"}),n&&S?Object(u.jsx)(re.a,{children:(t=n["".concat(e.ticker)].values[0].close*e.quantity,c=e.purchase_price*e.quantity,t>c?[((t-c)/c*100).toFixed(2),!0]:t<c?[((c-t)/c*100).toFixed(2),!1]:void 0)[0]}):Object(u.jsx)(re.a,{children:"waiting"}),n&&S?Object(u.jsx)(re.a,{children:_(n["".concat(e.ticker)].values[0].close*e.quantity,e.purchase_price*e.quantity)[0]}):Object(u.jsx)(re.a,{children:"waiting"}),Object(u.jsx)(re.a,{children:Object(u.jsx)(m.a,{type:"",onClick:function(){var t;t=e,l(!0),d(t)},children:Object(u.jsx)(je.a,{})})})]}):null;var t,c,a,s})),Object(u.jsxs)(ie.a,{style:{backgroundColor:"#90EE90"},children:[Object(u.jsx)(re.a,{children:Object(u.jsx)(X.a,{variant:"h5",children:"Total"})}),Object(u.jsx)(re.a,{}),Object(u.jsx)(re.a,{}),Object(u.jsx)(re.a,{children:Object(u.jsxs)(X.a,{variant:"h5",children:["$",T.toFixed(2)]})}),Object(u.jsx)(re.a,{}),Object(u.jsx)(re.a,{}),Object(u.jsx)(re.a,{})]})]}):null})]})})]})};var xe=function(e){var t=e.user,n=e.priceData,a=e.setPriceData,s=e.tickerForFetch,i=e.setTickerForFetch;return console.log("portfolio page tickers",s),Object(c.useEffect)((function(){s&&fetch("https://api.twelvedata.com/time_series?symbol=".concat(s,"&interval=1min&apikey=5b65bc522cdd4e51a3c12d1073b5e3ef")).then((function(e){return e.json()})).then((function(e){e.code?(console.log("api 2"),fetch("https://api.twelvedata.com/time_series?symbol=".concat(s,"&interval=1min&apikey=60af8428441c4634a020712e7cd5f7e1")).then((function(e){return e.json()})).then((function(e){e.code?(console.log(""),fetch("https://api.twelvedata.com/time_series?symbol=".concat(s,"&interval=1min&apikey=c388556de8104717a7b14b0d9281eb96")).then((function(e){return e.json()})).then((function(e){e.code?alert("data request limit exceded please try again in 1 min"):a(e)}))):a(e)}))):(a(e),console.log("api 1"))}))}),[]),t?Object(u.jsxs)(h.a,{children:[Object(u.jsxs)(X.a,{variant:"h4",style:{marginLeft:"8px",marginTop:"8px"},children:[t.username,"'s Portfolio"]}),Object(u.jsx)(pe,{user:t,priceData:n,setPriceData:a,tickerForFetch:s,setTickerForFetch:i,s:!0})]}):Object(u.jsx)(X.a,{variant:"h4",children:"login or create an account to see portfolio"})},fe=n(201),me=n(212);var ge=function(e){var t=e.isOpen,n=e.setOpen,c=e.data,a=e.setWatchlistItems;return Object(u.jsx)(Y.a,{open:t,onClose:function(e){return n(!e)},children:c?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(Z.a,{children:[c.symbol," info"]}),Object(u.jsx)(ne.a,{component:ce.a,children:Object(u.jsx)(ae.a,{children:Object(u.jsxs)(oe.a,{children:[Object(u.jsxs)(ie.a,{children:[Object(u.jsx)(re.a,{children:"full name"}),Object(u.jsx)(re.a,{children:c.priceData.name})]}),Object(u.jsxs)(ie.a,{children:[Object(u.jsx)(re.a,{children:"day high"}),Object(u.jsxs)(re.a,{children:["$",c.priceData.high]})]}),Object(u.jsxs)(ie.a,{children:[Object(u.jsx)(re.a,{children:"day low"}),Object(u.jsxs)(re.a,{children:["$",c.priceData.low]})]}),Object(u.jsxs)(ie.a,{children:[Object(u.jsx)(re.a,{children:"day open"}),Object(u.jsxs)(re.a,{children:["$",c.priceData.open]})]}),Object(u.jsxs)(ie.a,{children:[Object(u.jsx)(re.a,{children:"day close"}),Object(u.jsxs)(re.a,{children:["$",c.priceData.close]})]}),Object(u.jsxs)(ie.a,{children:[Object(u.jsx)(re.a,{children:"day change($)"}),Object(u.jsx)(re.a,{children:c.priceData.change})]}),Object(u.jsxs)(ie.a,{children:[Object(u.jsx)(re.a,{children:"day change(%)"}),Object(u.jsx)(re.a,{children:c.priceData.percent_change})]})]})})}),Object(u.jsx)(m.a,{color:"error",onClick:function(e){fetch("/watchlist-items/".concat(e.target.value),{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){return a(e)}))},value:c.itemId,style:{marginTop:"8px",marginBottom:"8px"},children:"remove"})]}):null})};var ye=function(e){e.user;var t=e.selectedWatchlist,n=e.priceData,a=e.setPriceData,s=Object(c.useState)([]),i=Object(r.a)(s,2),o=i[0],l=i[1],j=Object(c.useState)(!1),b=Object(r.a)(j,2),h=b[0],O=b[1],d=Object(c.useState)(!1),p=Object(r.a)(d,2),x=p[0],f=p[1],g=Object(c.useState)(!1),y=Object(r.a)(g,2),v=y[0],k=y[1];function C(e){f(!0),k(JSON.parse(e.target.value))}return Object(c.useEffect)((function(){0==t?console.log("no selected watchlist"):fetch("/watchlists/".concat(t)).then((function(e){return e.json()})).then((function(e){l(e.watchlist_items),O(e.watchlist_items.map((function(e){return e.ticker})))}))}),[t]),Object(c.useEffect)((function(){h&&fetch("https://api.twelvedata.com/quote?symbol=".concat(h,"&apikey=5b65bc522cdd4e51a3c12d1073b5e3ef")).then((function(e){return e.json()})).then((function(e){a(e)}))}),[h]),Object(u.jsx)(u.Fragment,{children:n&&Object(u.jsxs)(ne.a,{component:ce.a,children:[Object(u.jsx)(ge,{isOpen:x,setOpen:f,data:v,setWatchlistItems:l}),Object(u.jsxs)(ae.a,{children:[Object(u.jsx)(se.a,{children:Object(u.jsxs)(ie.a,{children:[Object(u.jsx)(re.a,{children:"Symbol"}),Object(u.jsx)(re.a,{children:"price"}),Object(u.jsx)(re.a,{children:"24hr change (%)"}),Object(u.jsx)(re.a,{children:"1yr range"}),Object(u.jsx)(re.a,{})]})}),o!==[]?Object(u.jsx)(oe.a,{children:1===o.length?Object(u.jsx)(u.Fragment,{children:n?Object(u.jsxs)(ie.a,{children:[Object(u.jsx)(re.a,{children:n.symbol}),Object(u.jsx)(re.a,{children:n.close}),Object(u.jsx)(re.a,{children:parseFloat(n.percent_change).toFixed(2)}),Object(u.jsx)(re.a,{children:n.fifty_two_week.range}),Object(u.jsx)(re.a,{children:Object(u.jsx)(m.a,{onClick:C,value:JSON.stringify({priceData:n,itemId:o[0].id}),children:"more"})})]}):Object(u.jsx)(X.a,{})}):o.map((function(e){return n?Object(u.jsxs)(ie.a,{children:[Object(u.jsx)(re.a,{children:e.ticker}),Object(u.jsx)(re.a,{children:n[e.ticker].close}),Object(u.jsx)(re.a,{children:parseFloat(n[e.ticker].percent_change).toFixed(2)}),Object(u.jsx)(re.a,{children:n[e.ticker].fifty_two_week.range}),Object(u.jsx)(re.a,{children:Object(u.jsx)(m.a,{onClick:C,value:JSON.stringify({priceData:n[e.ticker],itemId:e.id}),children:"more"})})]}):Object(u.jsx)(X.a,{children:"loading..."})}))}):null]})]})})};var ve=function(e){var t=e.user,n=Object(c.useState)(!1),a=Object(r.a)(n,2),s=a[0],i=a[1],o=Object(c.useState)(!1),l=Object(r.a)(o,2),j=l[0],b=l[1];return Object(c.useEffect)((function(){console.log("selected watchlist change")}),[s]),t?Object(u.jsxs)(h.a,{children:[Object(u.jsxs)(fe.a,{onChange:function(e){"list"!==e.target.value&&(i(e.target.value),b(!1))},defaultValue:"list",style:{margin:"8px"},children:[Object(u.jsx)(me.a,{value:"list",children:"select a list"}),t.watchlists.map((function(e){return Object(u.jsx)(me.a,{value:e.id,children:e.name})}))]}),Object(u.jsx)(ye,{selectedWatchlist:s,setPriceData:b,priceData:j})]}):Object(u.jsx)(X.a,{variant:"h4",children:"login to see page"})},ke=n(17);var Ce=function(e){var t=e.portDialog,n=e.setPortDialog,a=e.data,s=e.priceData,i=e.setPriceData,o=e.tickerForFetch,j=e.setTickerForFetch,b=(Object(l.f)(),Object(c.useState)({ticker:a.symbol,name:a.name,purchase_price:"",purchase_date:"",quantity:""})),h=Object(r.a)(b,2),O=h[0],d=h[1];function g(e){d(Object(x.a)(Object(x.a)({},O),{},Object(p.a)({},e.target.name,e.target.value)))}return Object(u.jsxs)(Y.a,{open:t,onClose:function(e){return n(!e)},children:[Object(u.jsx)(Z.a,{children:a.symbol}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log("btn click",o);var c=Object(x.a)({},O);delete c.name,console.log(c),fetch("/portfolio_item",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(){n(!t),fetch("/me").then((function(e){return e.json()})).then((function(e){!function(e){var t=e.map((function(e){return e.ticker}));j(t),console.log("tick array",o)}(e.portfolio_items),j([].concat(Object(ke.a)(o),[O.ticker])),i(!1),console.log("priceData",s)}))}))},children:[Object(u.jsx)(f.a,{label:"purchase date",name:"purchase_date",onChange:g,value:O.purchase_date,style:{display:"none"}}),Object(u.jsx)(f.a,{label:"purchase price",name:"purchase_price",onChange:g,value:O.purchase_price,size:"small",style:{marginLeft:"8px",marginBottom:"8px"}}),Object(u.jsx)(f.a,{label:"amount",name:"quantity",onChange:g,value:O.quantity,size:"small",style:{marginLeft:"8px",marginBottom:"8px"}}),Object(u.jsx)(m.a,{type:"submit",variant:"contained",style:{marginLeft:"8px",marginRight:"8px"},children:"add"})]})]})},we=n(113),De=n.n(we);var Se=function(e){var t=e.isCreateWatchlistOpen,n=e.setIsCreateWatchlistOpen,c=e.user,a=e.watchlists;return e.setWatchlists,Object(u.jsxs)(Y.a,{open:t,onClose:function(e){return n(!e)},children:[Object(u.jsx)(Z.a,{children:"Create a Watchlist"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/watchlists",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.target.watchlist.value,user_id:c.id})}).then((function(e){return e.json()})).then((function(e){console.log(a.push(e))}))},children:[Object(u.jsx)(f.a,{name:"watchlist",label:"watchlist name"}),Object(u.jsx)(m.a,{type:"submit",variant:"contained",children:"create"})]})]})};var Fe=function(e){var t=e.user,n=e.isOpen,a=e.setOpen,s=e.cardData,i=Object(c.useState)("choose a watchlist"),o=Object(r.a)(i,2),l=o[0],j=o[1],b=Object(c.useState)(!1),h=Object(r.a)(b,2),O=h[0],d=h[1],p=Object(c.useState)(!1),x=Object(r.a)(p,2),f=x[0],g=x[1],y=Object(c.useState)(t.watchlists),v=Object(r.a)(y,2),k=v[0],C=v[1];return Object(u.jsxs)(Y.a,{open:n,onClose:function(e){return a(!e)},children:[Object(u.jsx)(Se,{isCreateWatchlistOpen:f,setIsCreateWatchlistOpen:g,user:t,setWatchlists:C,watchlists:k}),Object(u.jsx)(Z.a,{children:l}),Object(u.jsxs)(fe.a,{onChange:function(e){"add"===e.target.value&&g(!0),j(e.target.value.name),d(e.target.value)},style:{marginLeft:"8px",marginRight:"8px"},defaultValue:"list",children:[Object(u.jsx)(me.a,{value:"list",children:"select a list"}),k.map((function(e){return Object(u.jsx)(me.a,{value:e,children:e.name})})),Object(u.jsxs)(me.a,{value:"add",children:["create watchlist",Object(u.jsx)(De.a,{})]})]}),Object(u.jsxs)(m.a,{type:"submit",variant:"contained",onClick:function(){console.log(O),(O||"list"!==O)&&fetch("/watchlist-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({watchlist_id:O.id,ticker:s.symbol})})},style:{margin:"8px"},children:["add ",s.symbol]})]})};var Te=function(e){var t=e.isOpen,n=e.setOpen,c=e.data;return console.log("info",c),c?Object(u.jsxs)(Y.a,{open:t,onClose:function(e){return n(!e)},children:[Object(u.jsx)(X.a,{variant:"h5",style:{marginLeft:"8px",marginTop:"8px"},children:c.symbol}),Object(u.jsxs)(X.a,{style:{marginLeft:"8px"},children:["last price: $",c.close]}),Object(u.jsxs)(X.a,{style:{marginLeft:"8px",marginRight:"8px",marginBottom:"8px"},children:["52 wk range: ",c.fifty_two_week.range]})]}):null};n(153).config();var _e=function(e){var t=e.res,n=e.user,a=e.priceData,s=e.setPriceData,i=e.tickerForFetch,o=e.setTickerForFetch,l=Object(c.useState)(!1),j=Object(r.a)(l,2),b=j[0],O=j[1],d=Object(c.useState)(!1),p=Object(r.a)(d,2),x=p[0],f=p[1],g=Object(c.useState)(!1),y=Object(r.a)(g,2),v=y[0],k=y[1],C=Object(c.useState)(!1),w=Object(r.a)(C,2),D=w[0],S=w[1];return Object(u.jsxs)(h.a,{children:[v&&Object(u.jsx)(Ce,{portDialog:b,setPortDialog:O,data:v,priceData:a,setPriceData:s,tickerForFetch:i,setTickerForFetch:o}),v&&Object(u.jsx)(Te,{isOpen:x,setOpen:f,data:v}),Object(u.jsx)(Fe,{isOpen:D,setOpen:S,user:n,cardData:t}),Object(u.jsx)(K.a,{style:{margin:"4%"},children:Object(u.jsxs)(Q.a,{children:[Object(u.jsxs)(h.a,{sx:{display:"flex"},children:[Object(u.jsx)(X.a,{variant:"h5",children:t.symbol}),Object(u.jsx)(m.a,{variant:"contained",onClick:function(){fetch("https://api.twelvedata.com/quote?symbol=".concat(t.symbol,"&apikey=60af8428441c4634a020712e7cd5f7e1")).then((function(e){return e.json()})).then(k),f(!0)},style:{marginLeft:"12px"},children:"info"})]}),Object(u.jsxs)(X.a,{children:["company: ",t.instrument_name]}),Object(u.jsxs)(X.a,{children:["exchange: ",t.exchange]}),Object(u.jsx)(m.a,{variant:"contained",onClick:function(){fetch("https://api.twelvedata.com/quote?symbol=".concat(t.symbol,"&apikey=60af8428441c4634a020712e7cd5f7e1")).then((function(e){return e.json()})).then(k),O(!0)},style:{marginBottom:"8px",marginRight:"8px"},children:"Add to portolio"}),Object(u.jsx)(m.a,{variant:"contained",onClick:function(){S(!0)},style:{marginBottom:"8px"},children:"Add to a watchlist"})]})})]})};var Pe=function(e){var t=e.results,n=e.user,a=e.priceData,s=e.setPriceData,i=e.tickerForFetch,o=e.setTickerForFetch,l=Object(c.useState)([]),j=Object(r.a)(l,2),b=j[0],O=j[1];return console.log("search page: ",i),Object(c.useEffect)((function(){fetch("https://api.twelvedata.com/symbol_search?symbol=".concat(t,"&outputsize=120")).then((function(e){return e.json()})).then((function(e){O(e.data)}))}),[t]),console.log(b),Object(u.jsx)(h.a,{children:n?b.map((function(e){return Object(u.jsx)(_e,{res:e,user:n,priceData:a,setPriceData:s,tickerForFetch:i,setTickerForFetch:o})})):Object(u.jsx)(X.a,{children:"Sign in to use this feature"})})},Ie=n(205),Le=n(200),Ee=n(118),Ue=n.n(Ee),qe=n(115),Je=n.n(qe),Ne=n(114),Be=n.n(Ne),Re=n(116),We=n.n(Re);var Ae=function(e){var t=e.post,n=e.isOpen,a=e.setIsOpen,s=Object(c.useState)({title:t.title,content:t.content}),i=Object(r.a)(s,2),o=i[0],l=i[1];function j(e){l(Object(x.a)(Object(x.a)({},o),{},Object(p.a)({},e.target.name,e.target.value)))}return Object(u.jsxs)(Y.a,{open:n,onClose:function(e){return a(!e)},children:[Object(u.jsx)(Z.a,{children:"Edit Post"}),Object(u.jsxs)("form",{onSubmit:function(){fetch("/posts/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})},children:[Object(u.jsx)(f.a,{name:"title",label:"title",onChange:j,value:o.title}),Object(u.jsx)(f.a,{name:"content",label:"content",multiline:!0,maxRows:8,onChange:j,value:o.content}),Object(u.jsx)(m.a,{type:"submit",variant:"contained",children:"publish"})]})]})};var ze=function(e){var t=e.post,n=e.user,a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],o=s[1],l=Object(c.useState)(t.likes),j=Object(r.a)(l,2),b=j[0],O=j[1],d=Object(c.useState)(!1),p=Object(r.a)(d,2),g=p[0],y=p[1],v=Object(c.useState)(!1),k=Object(r.a)(v,2),C=k[0],w=k[1],D=Object(c.useState)({post_id:t.id,user_id:n.id,content:""}),S=Object(r.a)(D,2),F=S[0],T=S[1],P=Object(c.useState)([]),I=Object(r.a)(P,2),L=I[0],E=I[1];return console.log(n),Object(u.jsxs)(K.a,{style:{marginBottom:"10px"},children:[Object(u.jsx)(Ae,{isOpen:g,setIsOpen:y,post:t}),Object(u.jsxs)(h.a,{sx:{display:"flex"},children:[Object(u.jsx)(X.a,{sx:{marginLeft:"9px"},variant:"h5",children:t.title}),Object(u.jsxs)(m.a,{onClick:function(){o(!i),i?fetch("/posts/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({likes:b-1})}).then((function(e){return e.json()})).then((function(){return O(b-1)})):i||fetch("/posts/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({likes:b+1})}).then((function(e){return e.json()})).then((function(){return O(b+1)}))},children:[Object(u.jsx)(X.a,{children:b}),i?Object(u.jsx)(Be.a,{}):Object(u.jsx)(Je.a,{})]}),Object(u.jsxs)(m.a,{onClick:function(){w(!C)},children:[Object(u.jsx)(X.a,{children:t.post_comments.length}),Object(u.jsx)($.a,{})]}),n.id===t.user.id?Object(u.jsx)(m.a,{onClick:function(){y(!0)},children:Object(u.jsx)(We.a,{})}):null]}),Object(u.jsx)(Q.a,{children:t.content}),C?Object(u.jsxs)(h.a,{children:[Object(u.jsx)("form",{onSubmit:function(e){e.preventDefault(),fetch("/post-comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)}).then((function(e){return e.json()})).then((function(e){console.log(e),E([].concat(Object(ke.a)(L),[e]))}))},children:Object(u.jsxs)(h.a,{sx:{display:"flex"},children:[Object(u.jsx)(f.a,{name:"content",fullWidth:!0,label:"add a comment...",size:"small",value:F.content,onChange:function(e){T(Object(x.a)(Object(x.a)({},F),{},{content:e.target.value}))},sx:{margin:"4px"}}),Object(u.jsx)(m.a,{type:"submit",children:"send"})]})}),t.post_comments.map((function(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Le.a,{}),Object(u.jsxs)(h.a,{sx:{display:"flex"},children:[Object(u.jsx)(_.a,{src:e.profile.profile_img,sx:{marginLeft:"9px",marginTop:"9px"}}),Object(u.jsx)(X.a,{style:{marginTop:"15px",marginLeft:"6px"},children:e.profile.username})]}),Object(u.jsx)(X.a,{style:{marginLeft:"10px"},children:e.content})]})})),L.map((function(e){if(L!==[])return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Le.a,{}),Object(u.jsxs)(h.a,{sx:{display:"flex"},children:[Object(u.jsx)(_.a,{src:e.profile.profile_img,sx:{marginLeft:"9px",marginTop:"9px"}}),Object(u.jsx)(X.a,{style:{marginTop:"15px",marginLeft:"6px"},children:e.profile.username})]}),Object(u.jsx)(X.a,{style:{marginLeft:"10px"},children:e.content})]})}))]}):null]})},$e=n(117),He=n.n($e);var Ve=function(e){var t=e.isPostOpen,n=e.setIsPostOpen,a=e.postData,s=e.setPostData,i=Object(c.useState)({title:"",content:"",likes:0,ticker:""}),o=Object(r.a)(i,2),l=o[0],j=o[1];function b(e){j(Object(x.a)(Object(x.a)({},l),{},Object(p.a)({},e.target.name,e.target.value)))}return Object(u.jsxs)(Y.a,{open:t,onClose:function(e){return n(!e)},fullWidth:!0,children:[Object(u.jsx)(Z.a,{sx:{display:"flex"},children:Object(u.jsx)(X.a,{variant:"h6",children:"Create Post"})}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then((function(e){return e.json()})).then((function(e){console.log(e),s([].concat(Object(ke.a)(a),[e])),n(!t)}))},children:[Object(u.jsx)(f.a,{name:"title",value:l.title,onChange:b,label:"title",size:"small",style:{marginLeft:"4%",marginRight:"4%",width:"40%"}}),Object(u.jsx)(f.a,{name:"ticker",value:l.ticker,onChange:b,label:"ticker",size:"small",style:{marginRight:"4%",width:"40%"}}),Object(u.jsx)("br",{}),Object(u.jsx)(f.a,{name:"content",label:"write post...",multiline:!0,maxRows:6,value:l.content,onChange:b,style:{marginLeft:"4%",marginRight:"4%",width:"84%",marginTop:"9px",marginBottom:"2px"}}),Object(u.jsx)("br",{}),Object(u.jsxs)(m.a,{variant:"contained",type:"submit",style:{marginTop:"4px",marginLeft:"4%",marginBottom:"20px"},children:["send",Object(u.jsx)(He.a,{style:{marginLeft:"3px"}})]})]})]})};function Me(e){var t=e.user,n=Object(c.useState)(!1),a=Object(r.a)(n,2),s=a[0],i=a[1],o=Object(c.useState)(!1),l=Object(r.a)(o,2),j=l[0],b=l[1];return Object(c.useEffect)((function(){fetch("/posts").then((function(e){return e.json()})).then((function(e){i(e),console.log(e)}))}),[]),Object(u.jsxs)(h.a,{sx:{margin:"3%"},children:[Object(u.jsx)(Ve,{isPostOpen:j,setIsPostOpen:b,setPostData:i,postData:s}),Object(u.jsx)(Ie.a,{ariaLabel:"SpeedDial basic example",sx:{position:"fixed",bottom:16,right:16},icon:Object(u.jsx)(Ue.a,{}),onClick:function(){b(!0)}}),Object(u.jsx)(X.a,{variant:"h4",style:{textAlign:"center"},children:"MoreForum"}),Object(u.jsx)(Le.a,{sx:{marginBottom:"2%"}}),s?Object(u.jsx)(h.a,{children:s.map((function(e){return Object(u.jsx)(ze,{post:e,user:t})}))}):Object(u.jsx)(X.a,{children:"loading..."})]})}var Ge=Object(j.a)({palette:{primary:{main:"#1C6E8C"},secondary:{main:"#5171A5"},third:{main:"#D6F9FF",contrastText:"#07020D"},blackish:{main:"#07020D",contrastText:"#FFFFFF"}}});var Ke=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!1),i=Object(r.a)(s,2),j=i[0],h=i[1],d=Object(c.useState)(!1),p=Object(r.a)(d,2),x=p[0],f=p[1],m=Object(c.useState)(!1),g=Object(r.a)(m,2),v=g[0],k=g[1];return Object(c.useEffect)((function(){fetch("/me").then((function(e){return e.json()})).then((function(e){e.errors?console.log(e.errors):a(e)}))}),[]),Object(u.jsx)(b.a,{theme:Ge,children:Object(u.jsxs)(o.a,{children:[Object(u.jsx)(G,{user:n,setUser:a,setSearchResults:h,searchResults:j}),Object(u.jsxs)(l.c,{children:[Object(u.jsx)(l.a,{exact:!0,path:"/",children:Object(u.jsx)(O,{})}),Object(u.jsx)(l.a,{path:"/signup",children:Object(u.jsx)(y,{setUser:a})}),Object(u.jsx)(l.a,{path:"/signin",children:Object(u.jsx)(S,{setUser:a})}),Object(u.jsx)(l.a,{path:"/my-account",children:Object(u.jsx)(te,{user:n,setUser:a})}),Object(u.jsx)(l.a,{path:"/my-portfolio",children:Object(u.jsx)(xe,{user:n,priceData:x,setPriceData:f,tickerForFetch:v,setTickerForFetch:k})}),Object(u.jsx)(l.a,{path:"/my-watchlists",children:Object(u.jsx)(ve,{user:n})}),Object(u.jsx)(l.a,{path:"/asset-search",children:Object(u.jsx)(Pe,{results:j,user:n,priceData:x,setPriceData:f,tickerForFetch:v,setTickerForFetch:k})}),Object(u.jsx)(l.a,{path:"/forum",children:Object(u.jsx)(Me,{user:n})})]})]})})},Qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,233)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),s(e),i(e)}))};i.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(Ke,{})}),document.getElementById("root")),Qe()}},[[156,1,2]]]);
//# sourceMappingURL=main.e0b89d6e.chunk.js.map